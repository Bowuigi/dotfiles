# vim: ft=sh
path = (/bin /sbin /usr/bin /usr/sbin /usr/local/sbin /usr/local/bin $HOME/bin /usr/bin/core_perl)
EDITOR = nvim
PAGER = less
WWW_HOME = searx.garudalinux.org
BROWSER = links -g
# ELinks for TUI, Links2 for Framebuffer

red = `{color red}
green = `{color green}
blue = `{color blue}
cyan = `{color cyan}
normal = `{color normal}
bold = `{color bold}

fn m { $EDITOR $* }
fn p { $PAGER $* }
fn S { $BROWSER $* }

fn gs { git status $* }
fn ga { git add $* }
fn gc { git commit $* }
fn gp { git push $* }
fn gP { git pull $* }
fn gl { git shortlog $* }

fn config { m ~/.esrc && . ~/.esrc }

fn l {
	ls '--color=auto' -SAhs $*
}

fn cleanpwd {
	pwd | sed 's#'^$HOME^'#~#gi'
}

fn spkg {
	yay '--color=always' -Ss $* | $PAGER -R
}

fn scheck {
	du -c -h / >[2] /dev/null | tail -n1
}

fn list {
	pkg = `{ls $path | grep $* | sort | uniq}
	num = `{echo $pkg | tr ' ' \n | wc -l}
	echo Found $num executables matching options and pattern $*
	echo $pkg | tr ' ' \n
}

fn mxopen {
	prevdir = `pwd
	cd ~/.cache/gomuks/media/$1
	mpv '--vo=drm' `{ls -tr | tail -n $2}
	cd $prevdir
}

fn Ã± { clear }

fn 3 {
	[ $TERM '=' linux ] && tree -Cah $* || tree -CAah $*
}

# Beep with alsa
fn alarm {
	echo 'Beep!'
	{
		for (a = `{seq 700}) {
			echo 'abc'
		}
	} | aplay >[2] /dev/null
}

fn %prompt {
	prompt = ($green^$bold^[$bqstatus]^$normal^' -> '^$blue^`{cleanpwd}^$normal^\n^'> '^$bold '> ')
}

